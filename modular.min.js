(function(){function a(g,m,c){function b(e,n){if(!m[e]){if(!g[e]){var k="function"==typeof require&&require;if(!n&&k)return k(e,!0);if(d)return d(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=m[e]={exports:{}};g[e][0].call(k.exports,function(a){return b(g[e][1][a]||a)},k,k.exports,a,g,m,c)}return m[e].exports}for(var d="function"==typeof require&&require,n=0;n<c.length;n++)b(c[n]);return b}return a})()({1:[function(a,g,m){a("./main")},{"./main":2}],2:[function(a,
g,m){(function(a){for(var b in a)this[b]=a[b]})(function(){a("./util/promise");var c=a("./util/polyfill"),b=a("./util/queue"),d=a("./util/word");a("./util/ajax");a("./util/util");var n=a("./module/loader"),e=a("./module/config");c();var g=new e,k=new b;c={};n.init(g);c[d.REQUIRE_IMPORT]=function(b,a){k.offer(function(){setTimeout(function(){n.imports(b,g,function(b,f){a.apply(b,b);f()})},20)})};c[d.MODULAR_CONFIGURE]={config:function(b){g.set(b)}};return c}())},{"./module/config":3,"./module/loader":4,
"./util/ajax":9,"./util/polyfill":11,"./util/promise":12,"./util/queue":13,"./util/util":14,"./util/word":15}],3:[function(a,g,m){a("../util/word");var c=a("../util/util");a("./module");a=function(b){this._self_={es6:!1,resource:{path:"",excludePattern:"",isRemovePatten:!0},request:{path:"",excludePattern:"",isRemovePatten:!0},lib:{},alias:{},shim:{},defaultDeps:{require:[],request:[],requestView:[]}}};a.prototype.set=function(b){var a=function(b,d){c.eachObj(d,function(c,e){"object"===typeof d[c]&&
0<Object.keys(d[c]).length&&a(b[c],d[c]);void 0!=d[c]&&"object"!=typeof d[c]&&void 0!==b&&(b[c]=d[c])})};a(this._self_,b);var n=this._self_.lib;c.eachObj(b.lib,function(b,a){n[b]=a});var e=this._self_.alias;c.eachObj(b.alias,function(b,a){e[b]=a});var g=this._self_.shim;c.eachObj(b.shim,function(b,a){g[b]=a});this.setConfigValidator(this._self_)};a.prototype.setConfigValidator=function(b){b.resource.isRemovePatten=!0!==b.resource.isRemovePatten?!1:!0;b.request.isRemovePatten=!0!==b.request.isRemovePatten?
!1:!0;b.resource.excludePattern=void 0==b.resource.excludePattern?void 0:b.resource.excludePattern;b.request.excludePattern=void 0==b.request.excludePattern?void 0:b.request.excludePattern};a.prototype.getResourceUrl=function(b){return this.makePath(b,this._self_.resource)};a.prototype.getRequestUrl=function(b){return this.makePath(b,this._self_.request)};a.prototype.getLibData=function(b){var a=this._self_.lib[b];if(void 0!==a)return{self:a.self||b,propPath:a.path||b,requestPath:this.concat(this._self_.lib[b].path,
this._self_.request.path),path:this.concat(this._self_.lib[b].path,this._self_.resource.path),isGlobal:a.self?!0:!1}};a.prototype.getAliasData=function(b){var a=this._self_.alias[b];if(void 0!==a)return{propPath:a.path||b,requestPath:this.concat(this._self_.alias[b].path,this._self_.request.path),path:this.concat(this._self_.alias[b].path,this._self_.resource.path)}};a.prototype.makePath=function(b,a){void 0!==b&&""!==b.replace(/\s/gi)||c.error("There is empty path");var d=this._self_.lib;if(d.hasOwnProperty(b)&&
d[b].hasOwnProperty("path"))return this.concat(d[b].path,a.path);d=this.isExcludePattern(b,a.excludePattern);b=a.isRemovePatten?b.replace(a.excludePattern,""):b;return d?b:this.concat(b,a.path)};a.prototype.concat=function(b,a){return(void 0!=a&&"string"===typeof a?a+b:b).replace(/\/\//g,"/")};a.prototype.isExcludePattern=function(b,a){var c=!1;if("/"===a)return c=!0;void 0!==a&&""!==a.replace(/\s\S/g,"")&&(a.split(",").map(function(a){return a.replace(/\s/gi,"")}),-1!==b.indexOf(a)&&(c=!0));return c};
g.exports=a},{"../util/util":14,"../util/word":15,"./module":7}],4:[function(a,g,m){(function(c){var b=a("../util/promise"),d=a("../util/queue"),n=a("../util/cache"),e=a("../util/word"),m=a("../util/ajax"),k=a("../util/util"),t=a("./module-view"),p=a("./module"),h=function(){this._isDefine_=!1;this._defineQueue_=new d;this._cache_=new n};h.prototype.init=function(f){this._defineQueue_.stop();var a=function(a,b,c){var q=this;void 0===c&&(c=b,b=a,a=void 0);void 0===c&&(c=b,b=void 0);var d=void 0,l=
!0;"string"===typeof a?d=a:"object"===typeof a&&(d=null!=a.name&&""!==a.name.replace(/\s/g,"")?a.name:d,l=!1===a.cache?!1:l);d=void 0;q._isDefine_=!0;q._defineQueue_.offer(function(a){q.imports(b,f,function(f,b){a({define:c,paramModules:f,cache:l})})})}.bind(this);a.amd={modular:!0};window[e.DEFINE]=a};h.prototype.transpile=function(a){return a};h.prototype.loadModuleJs=function(a,b){this.load(a,function(a){b(a.data,a.cache)})};h.prototype.loadModuleNode=function(a,c){var f=this;new p;var d={},l=
!0,e=new b(function(){c(d,l);a.complete()});void 0!==a.libData?a.url=a.libData.requestPath:void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);a.isGlobal=!1;this.loadModuleAsString(a.url,function(b,c){k.eachObj(c.modules,function(b,c,q){e.add(b,function(q){f.makeModuleFunction(f.transpile(c))(new p,{});f.loadModule(a,q,b,function(a){k.assign(d,a.self);l=!0===l&&!1===a.cache?!1:l;q()});f.loadComplete(b)})});e.start()})};h.prototype.loadModuleView=function(a,b){void 0!==a.libData?a.url=a.libData.requestPath:
void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);var f=new t(k.getNameFromPath(a.url),this._cache_);this.loadModuleAsString(a.url,function(c,d){f.initRender(this.makeRender().bind(this,f,c,d),this.makeRenderModuleFunction(this.transpile(d.renderScript.constructor)));b(f);a.complete()}.bind(this))};h.prototype.load=function(a,b){var f=a.libData,c=document.getElementsByTagName("head")[0],d=this.createNode(a);void 0!==f?(a.url=f.path,a.moduleName=f.self,a.isGlobal=f.isGlobal,a.isLib=!0):void 0!==
a.aliasData?a.url=a.aliasData.path:(a.isGlobal=!1,a.isLib=!1);d.src=a.url;d.setAttribute(e.MODULE_NAME,a.moduleName);var l=function(f){this.onLoadScript(f,a,d,l,b)}.bind(this);d.addEventListener("load",l,!1);c.appendChild(d)};h.prototype.onLoadScript=function(a,b,c,d,h){"load"===a.type&&(c.removeEventListener(c,d,a.type),this.loadModule(b,b.complete,c.getAttribute(e.MODULE_NAME),h),this.loadComplete(b.moduleName))};h.prototype.loadModule=function(a,b,c,d){var f=this._isDefine_?this._defineQueue_.peek():
void 0;f&&!a.isGlobal?this.loadDefineModule(a,d,b,c,f):this.loadGlobalModule(a,d,b)};h.prototype.loadDefineModule=function(a,b,c,d,e){var f=this;e(function(l){a.moduleData=l;l=f.getModule(a,d);b(l);c()})};h.prototype.loadGlobalModule=function(a,b,c){var f=a.moduleName,d=f;a.isLib||(d+=": There is no define function declared. ");a=this.getGlobalModule(f);void 0!==a?b({data:a,cache:!0}):d+=" \u203bfail loading module.";c();d!==f&&k.warn(d)};h.prototype.loadComplete=function(a){this._isDefine_=!1;this.removeScriptNode(a)};
h.prototype.getModule=function(a,b){var c=a.moduleData,f={};f.name=b;f.self={};f.data=c.define.apply(c.paramModules||[],c.paramModules);f.self[b]=f.data;f.cache=c.cache;return f};h.prototype.removeScriptNode=function(a){var b=document.getElementsByTagName("script");k.each(b,function(b,c){if(c.hasAttribute(e.MODULE_NAME)&&a===c.getAttribute(e.MODULE_NAME))return c.parentNode.removeChild(c),!1})};h.prototype.getGlobalModule=function(a){var b=window||c,f=b[a]||void 0;void 0!==f&&delete b[a];return f};
h.prototype.createNode=function(a){a=document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.async=!0;return a};h.prototype.loadModuleAsString=function(a,b){m.getAsync(a,function(a){a=k.removeAnnotation(a);var c=this.getScriptFromString(a);b(a,c)}.bind(this))};h.prototype.makeModuleFunction=function(a){return this.makeFunction([e.MODULE,e.EXPORTS],a)};h.prototype.makeRenderModuleFunction=function(a){return this.makeFunction([e.MESSAGE,e.RENDER_CONSTRUCTOR],a)};h.prototype.makeFunction=
function(a,b){try{return Function(a,b)}catch(q){k.error("syntax error: "+b)}};h.prototype.makeRender=function(){return function(a,b,c,d){var f=this,l=document.getElementById(d.targetId);c=c.scripts;f._cache_.hasChild(d.originRenderElementName,d.targetId)||f._cache_.setChild(d.originRenderElementName,d.targetId,l.innerHTML);l.innerHTML=b;d.setModuleScope({self:l.querySelector("["+e.MODULE_ELEMENT+"]")});if(!d.isRunScript)return!1;k.eachObj(c,function(b,c,e){f._cache_.hasChild(d.moduleName,b)?c=f._cache_.get(d.moduleName,
b):(c=f.makeRenderModuleFunction(f.transpile(c)),f._cache_.setChild(d.moduleName,b,c));c(a.message.self(),function(){})})}};h.prototype.getScriptFromString=function(a){var b={},c={},d={},f={};if(void 0!==a&&"string"===typeof a)for(;-1!=a.indexOf("<script");){var h=a.indexOf("<script");var p=a.indexOf("\x3c/script");h=a.substring(h,p)+"\x3c/script>";a=a.substring(p+9,a.length);try{var g=k.DOMParser.parseFromString(h,"application/xml").getElementsByTagName("script")}catch(u){k.error("syntax error:"+
h)}if(0===g.length)break;h=h.substring(h.indexOf(">")+1,h.indexOf("\x3c/script>"));g=g[0];this.isRenderConstructor(g)&&(g.setAttribute(e.MODULE_IGNORE,"true"),b.constructor=h);this.isIgnoreScript(g)||(p=g.getAttribute(e.MODULE_NAME),void 0!=p&&""!==k.trim(p)||k.error('"'+e.MODULE_NAME+'" property is required: \n'+h),d[p]=g,c[p]=h,f[p]=h)}return{modules:c,nodes:d,scripts:f,renderScript:b}};h.prototype.isRenderConstructor=function(a){return a.hasAttribute(e.MODULE_RENDER)&&"constructor"===a.getAttribute(e.MODULE_RENDER)};
h.prototype.isIgnoreScript=function(a){return a.hasAttribute(e.MODULE_IGNORE)&&"true"===a.getAttribute(e.MODULE_IGNORE)};h.prototype.imports=function(a,c,d){var f=c._self_.defaultDeps,h=new b,p=[],l={},g,q,n=this;k.eachObj(a,function(a,b,d){Array.isArray(d[a])&&(l[a]={},l[a][e.DEFAULT_DEPS]={},p.push(l[a]),g=f[a],q=g.concat(b).filter(function(a,b,c){return c.indexOf(a)===b}),k.each(q,function(b,d){n.importModule({type:a,path:d,config:c,importPromise:h,isDefault:-1<g.indexOf(d)?!0:!1,libData:c.getLibData(d),
aliasData:c.getAliasData(d),moduleName:k.getNameFromPath(d),importModules:l})}))});h.setComplete(function(){d(p,function(){n._cache_.clear()})});h.start()};h.prototype.importModule=function(a){a.setModuleDataFun=function(b,c){!0===a.isDefault?a.importModules[b][e.DEFAULT_DEPS][a.moduleName]=c:a.importModules[b][a.moduleName]=c};a.type===e.REQUIRE_JS?this.importModuleJs(a):a.type===e.REQUIRE_PAGE?this.importModuleNode(a):a.type===e.REQUIRE_VIEW&&this.importModuleView(a)};h.prototype.importModuleJs=
function(a){var b=this,c=a.moduleName;a.importPromise.add(c,function(d){if(b._cache_.has(c))return a.setModuleDataFun(e.REQUIRE_JS,b._cache_.get(c)),d(),!1;a.url=a.config.getResourceUrl(a.path);a.complete=d;b.loadModuleJs(a,function(d,f){a.setModuleDataFun(e.REQUIRE_JS,d);!0===f&&b._cache_.set(c,d)})})};h.prototype.importModuleNode=function(a){var b=this,c=a.moduleName;a.importPromise.add(c,function(d){if(b._cache_.has(c))return a.setModuleDataFun(e.REQUIRE_JS,b._cache_.get(c)),d(),!1;a.url=a.config.getRequestUrl(a.path);
a.complete=d;b.loadModuleNode(a,function(d,f){a.setModuleDataFun(e.REQUIRE_PAGE,d);!0===f&&b._cache_.set(c,d)})})};h.prototype.importModuleView=function(a){var b=a.moduleName+e.CACHE_VIEW_SUFFIX,c=this;a.importPromise.add(a.moduleName,function(d){if(c._cache_.has(b))return a.setModuleDataFun(e.REQUIRE_JS,c._cache_.get(b)),d(),!1;a.url=a.config.getRequestUrl(a.path);a.complete=d;c.loadModuleView(a,function(d){a.setModuleDataFun(e.REQUIRE_VIEW,d.exports);c._cache_.set(b,d.exports)})})};g.exports=new h}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../util/ajax":9,"../util/cache":10,"../util/promise":12,"../util/queue":13,"../util/util":14,"../util/word":15,"./module":7,"./module-view":6}],5:[function(a,g,m){a=function(a){this._storage_={};this._self_={};this._self_.on=function(b,c){this._storage_.hasOwnProperty(a)||(this._storage_[a]={});this._storage_[a][b]=c;return this._self_}.bind(this)};a.prototype.self=function(){return this._self_};
a.prototype.postMessage=function(a,b,d,g){void 0!==this._storage_[a][b]&&this._storage_[a][b].call(g,d);return this._self_};g.exports=a},{}],6:[function(a,g,m){function c(a,b){var c=!0;r.each(b.targetIds,function(d,h){a({targetId:h,isRunScript:c,startPostQueue:b.startPostQueue,setModuleScope:b.setModuleScope,moduleName:b.moduleName+e.CACHE_VIEW_RENDER_FUN_SUFFIX,originRenderElementName:b.moduleName+e.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX});c=!1;b.addRenderIds(h)})}function b(a,b,c,d){var f=b+e.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX,
h=void 0==a?void 0:a.split(",");r.eachRvs(c,function(b,e){if(void 0===a||-1!=h.indexOf(e)){var g=document.getElementById(e);if(d.hasChild(f,e))g.innerHTML=d.get(f,e);else for(;g.firstChild;)g.removeChild(g.firstChild);c.splice(b,1)}})}var d=a("../util/promise"),n=a("../util/queue"),e=a("../util/word"),r=a("../util/Util"),k=a("./module");a=function(a,b){this._create_=function(){var c=new k(a);this.extendToModuleForView(c,b);return c};return this._create_()};a.prototype.extendToModuleForView=function(a,
b){a.renderIds=[];a.moduleScope={};a.isCompleteConstructor=!1;a.postQueue=new n;a.viewCache=b;a.initRender=function(a,b){this.exports.render=this.exports.render.bind(this,a);var c=new d(function(a){this.moduleScope.state=a[e.RENDER_CONSTRUCTOR];this.startPostQueue();this.isCompleteConstructor=!0}.bind(this));void 0!==b&&c.add(e.RENDER_CONSTRUCTOR,function(a){b(void 0,function(b){b(a)})});this.postQueue.stop();c.start()};a.startPostQueue=function(){a.postQueue.run()};this.extendToExportsForView.call(a,
a.exports);r.defineProperty(a,"message")};a.prototype.extendToExportsForView=function(a){var d=this;a.render=function(a,b){if(void 0===b||"string"!==typeof b)return r.warn("render() parameter: not exists area id for render!"),d.exports;var e={moduleName:d.id,targetIds:b.split(","),startPostQueue:d.startPostQueue,setModuleScope:function(a){d.moduleScope.$self.push(a.self)},addRenderIds:function(a){-1===d.renderIds.indexOf(a)&&d.renderIds.push(a)}};!0===d.isCompleteConstructor&&0===d.postQueue.length()?
(d.moduleScope.$self=[],c(a,e)):d.postQueue.offer(function(){d.moduleScope.$self=[];c(a,e)});return d.exports};a.postMessage=function(a,b){d.postQueue.offer(function(){d.message.postMessage(d.id,a,b,d.moduleScope)});d.isCompleteConstructor&&d.startPostQueue();return d.exports};a.destroy=function(a){!0===d.isCompleteConstructor&&0===d.postQueue.length()?(d.exports.postMessage("destroy"),b(a,d.id,d.renderIds,d.viewCache)):d.postQueue.offer(function(){d.exports.postMessage("destroy");b(a,d.id,d.renderIds,
d.viewCache)});return d.exports}};g.exports=a},{"../util/Util":8,"../util/promise":12,"../util/queue":13,"../util/word":15,"./module":7}],7:[function(a,g,m){var c=a("./message"),b=a("../util/Util");a=function(a){this._create_=function(){var d=this.createModule();d.message=new c(a);d.cache=!0;d.id=a;b.defineProperty(d,"exports");b.defineProperty(d,"cache",{configurable:!1,enumerable:!1,writable:!0});return d};return this._create_()};a.prototype.createModule=function(){var a={};a.exports=this.createExports();
return a};a.prototype.createExports=function(){return{}};g.exports=a},{"../util/Util":8,"./message":5}],8:[function(a,g,m){a("./word");a={DOMParser:new DOMParser,assign:function(a,b){for(var c in b)a[c]=b[c]},each:function(a,b){if(a){var c;for(c=0;c<a.length;c++)if(a[c]&&!1===b(c,a[c]))return!1}return!0},eachRvs:function(a,b){if(a){var c;for(c=a.length-1;0<=c;c--)if(a[c]&&!1===b(c,a[c]))return!1}return!0},eachObj:function(a,b){if(a)for(var c in a)if(!1===!b(c,a[c],a))return!1;return!0},defineProperty:function(a,
b,d){d=d||{configurable:!1,enumerable:!1};Object.defineProperty(a,b,d)},getNameFromPath:function(a){a=String(a);var b="./"===a.split("./")[0]?2:"/"===a[0]?1:0;0!=b&&(a=a.substring(b,a.length));b=a.lastIndexOf("/");-1!=b&&(a=a.substring(b+1,a.length));b=a.lastIndexOf(".");-1!=b&&(a=a.substring(0,b));return a},trim:function(a){return a.replace(/\s\S/g,"")},isEs6Browser:function(){try{eval("function foo(bar, ...rest) { return 1; };")}catch(c){return!1}return!0}(),removeAnnotation:function(a){return a.replace(/(\/\*(\s|\S)*?\*\/)|<!-{2,}(\s|\S)*?-{2,}>|^\/\/.*/g,
"")},warn:function(a){console.warn("modular >> "+a)},error:function(a){console.error("modular >> "+a)}};g.exports=a},{"./word":15}],9:[function(a,g,m){var c=a("./util");a=function(){this._async_=!1};a.prototype.async=function(a){this._async_=void 0===a?!1:a;return this};a.prototype.createXMLHttpRequest=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")};a.prototype.$=function(a,d){var b=this.createXMLHttpRequest();b.open("GET",a,this._async_);var e={};
b.onload=function(b){var g=b.target.status;200!==g&&c.error("module:["+a+"] status:["+g+"].");d(e,b)};b.send();return e.data};a.prototype.getSync=function(a,c){this.async(!1);return this.$(a,function(a,b){a.data=c(b.target.response||b.target.responseText)})};a.prototype.getAsync=function(a,c){this.async(!0);this.$(a,function(a,b){c(b.target.response||b.target.responseText)})};g.exports=new a},{"./util":14}],10:[function(a,g,m){a=function(){this._self_={}};a.prototype.get=function(){var a=this._self_;
if(0==arguments.length)return a;for(var b=0,d;d=arguments[b];b++)null!=a[d]&&(a=a[d]);return a};a.prototype.set=function(a,b){this._self_[a]=b};a.prototype.setChild=function(a,b,d){this.has(a)||this.set(a,{});this._self_[a][b]=d};a.prototype.has=function(a){return this._self_.hasOwnProperty(a)};a.prototype.hasChild=function(a,b){return this._self_.hasOwnProperty(a)&&this._self_[a].hasOwnProperty(b)};a.prototype.clear=function(){this._self_={}};g.exports=a},{}],11:[function(a,g,m){g.exports=function(){}},
{}],12:[function(a,g,m){var c=a("../util/util");a=function(a){this._array_=[];this._completeFun_=a;this._state_={}};a.prototype.add=function(a,d){this._array_.push({name:a,fun:d,isLoad:!1})};a.prototype.start=function(){var a=this;0===a._array_.length&&this.runComplete();c.each(a._array_,function(b,c){c.fun(a.complete.bind(a,c))})};a.prototype.complete=function(a,c){a.isLoad=!0;this._state_[a.name]=c;this.isComplete()&&this.runComplete()};a.prototype.isComplete=function(){return 0===this._array_.length?
!0:c.each(this._array_,function(a,c){if(!1===c.isLoad)return!1})};a.prototype.setComplete=function(a){this._completeFun_=void 0===a?function(){}:a};a.prototype.runComplete=function(){if(void 0===this._completeFun_)return!1;this._completeFun_(this._state_);this._completeFun_=void 0;this._array_=[]};g.exports=a},{"../util/util":14}],13:[function(a,g,m){a=function(){this._stop_=!1;this._self_=[]};a.prototype.offer=function(a){this._self_.push(a);!1===this._stop_&&this.peek()()};a.prototype.peek=function(){return this._self_.shift()};
a.prototype.length=function(){return this._self_.length};a.prototype.isEmpty=function(){return 0===this._self_.length};a.prototype.stop=function(){this._stop_=!0};a.prototype.run=function(){for(;!this.isEmpty();)this.peek()();this._stop_=!1};g.exports=a},{}],14:[function(a,g,m){arguments[4][8][0].apply(m,arguments)},{"./word":15,dup:8}],15:[function(a,g,m){g.exports={REQUIRE_PAGE:"request",REQUIRE_JS:"require",REQUIRE_VIEW:"requestView",REQUIRE_IMPORT:"imports",DEFAULT_DEPS:"$default",MODULE:"module",
EXPORTS:"exports",MESSAGE:"message",DEFINE:"define",MODULAR_CONFIGURE:"modular",MODULE_NAME:"modular-name",MODULE_IGNORE:"modular-ignore",MODULE_ELEMENT:"modular-module",MODULE_RENDER:"modular-render",RENDER_CONSTRUCTOR:"renderConstructor",ES6_TYPE:"text/babel",ES6_PRESET:"es2015",CACHE_SYNC_PREFIX:"cache-sync-",CACHE_VIEW_SUFFIX:"-view",CACHE_VIEW_RENDER_FUN_SUFFIX:"-view-render-fun",CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX:"-view-render-origin-element"}},{}]},{},[1]);