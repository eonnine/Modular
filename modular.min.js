(function(){function a(g,m,c){function b(f,k){if(!m[f]){if(!g[f]){var l="function"==typeof require&&require;if(!k&&l)return l(f,!0);if(d)return d(f,!0);l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=m[f]={exports:{}};g[f][0].call(l.exports,function(a){return b(g[f][1][a]||a)},l,l.exports,a,g,m,c)}return m[f].exports}for(var d="function"==typeof require&&require,k=0;k<c.length;k++)b(c[k]);return b}return a})()({1:[function(a,g,m){a("./main")},{"./main":2}],2:[function(a,
g,m){(function(a){for(var b in a)this[b]=a[b]})(function(){a("./util/promise");var c=a("./util/polyfill"),b=a("./util/queue"),d=a("./util/word");a("./util/ajax");a("./util/util");var k=a("./module/loader"),f=a("./module/config");c();var g=new f,l=new b;c={};k.init(g);c[d.REQUIRE_IMPORT]=function(b,a){l.offer(function(){setTimeout(function(){k.imports(b,g,function(b,e){a.apply(b,b);e()})},20)})};c[d.MODULAR_CONFIGURE]={config:function(b){g.set(b)}};return c}())},{"./module/config":3,"./module/loader":4,
"./util/ajax":9,"./util/polyfill":11,"./util/promise":12,"./util/queue":13,"./util/util":14,"./util/word":15}],3:[function(a,g,m){a("../util/word");var c=a("../util/util");a("./module");a=function(b){this._self_={es6:!1,resource:{path:"",excludePattern:"",isRemovePatten:!0},request:{path:"",excludePattern:"",isRemovePatten:!0},lib:{},alias:{},shim:{},defaultDeps:{require:[],request:[],requestView:[]}}};a.prototype.set=function(b){var a=function(b,d){c.eachObj(d,function(c,f){"object"===typeof d[c]&&
0<Object.keys(d[c]).length&&a(b[c],d[c]);void 0!=d[c]&&"object"!=typeof d[c]&&void 0!==b&&(b[c]=d[c])})};a(this._self_,b);var k=this._self_.lib;c.eachObj(b.lib,function(b,a){k[b]=a});var f=this._self_.alias;c.eachObj(b.alias,function(b,a){f[b]=a});var g=this._self_.shim;c.eachObj(b.shim,function(b,a){g[b]=a});this.setConfigValidator(this._self_)};a.prototype.setConfigValidator=function(b){b.resource.isRemovePatten=!0!==b.resource.isRemovePatten?!1:!0;b.request.isRemovePatten=!0!==b.request.isRemovePatten?
!1:!0;b.resource.excludePattern=void 0==b.resource.excludePattern?void 0:b.resource.excludePattern;b.request.excludePattern=void 0==b.request.excludePattern?void 0:b.request.excludePattern};a.prototype.getResourceUrl=function(b){return this.makePath(b,this._self_.resource)};a.prototype.getRequestUrl=function(b){return this.makePath(b,this._self_.request)};a.prototype.getLibData=function(b){var a=this._self_.lib[b];if(void 0!==a)return{self:a.self||b,propPath:a.path||b,requestPath:this.concat(this._self_.lib[b].path,
this._self_.request.path),path:this.concat(this._self_.lib[b].path,this._self_.resource.path),isGlobal:a.self?!0:!1}};a.prototype.getAliasData=function(b){var a=this._self_.alias[b];if(void 0!==a)return{propPath:a.path||b,requestPath:this.concat(this._self_.alias[b].path,this._self_.request.path),path:this.concat(this._self_.alias[b].path,this._self_.resource.path)}};a.prototype.makePath=function(b,a){void 0!==b&&""!==b.replace(/\s/gi)||c.error("There is empty path");var d=this._self_.lib;if(d.hasOwnProperty(b)&&
d[b].hasOwnProperty("path"))return this.concat(d[b].path,a.path);d=this.isExcludePattern(b,a.excludePattern);b=a.isRemovePatten?b.replace(a.excludePattern,""):b;return d?b:this.concat(b,a.path)};a.prototype.concat=function(b,a){return(void 0!=a&&"string"===typeof a?a+b:b).replace(/\/\//g,"/")};a.prototype.isExcludePattern=function(b,a){var c=!1;if("/"===a)return c=!0;void 0!==a&&(a.split(",").map(function(a){return a.replace(/\s/gi,"")}),-1!==b.indexOf(a)&&(c=!0));return c};g.exports=a},{"../util/util":14,
"../util/word":15,"./module":7}],4:[function(a,g,m){(function(c){var b=a("../util/promise"),d=a("../util/queue"),k=a("../util/cache"),f=a("../util/word"),m=a("../util/ajax"),l=a("../util/util"),q=a("./module-view"),r=a("./module"),h=function(){this._isDefine_=!1;this._defineQueue_=new d;this._cache_=new k};h.prototype.init=function(e){this._defineQueue_.stop();var a=function(a,b,c){var d=this;void 0===c&&(c=b,b=a,a=void 0);void 0===c&&(c=b,b=void 0);var p=void 0,n=!0;"string"===typeof a?p=a:"object"===
typeof a&&(p=null!=a.name&&""!==a.name.replace(/\s/g,"")?a.name:p,n=!1===a.cache?!1:n);p=void 0;d._isDefine_=!0;d._defineQueue_.offer(function(a){d.imports(b,e,function(e,b){a({define:c,paramModules:e,cache:n})})})}.bind(this);a.amd={modular:!0};window[f.DEFINE]=a};h.prototype.transpile=function(a){return a};h.prototype.loadModuleJs=function(a,b){this.load(a,function(a){b(a.data,a.cache)})};h.prototype.loadModuleNode=function(a,c){var e=this;new r;var d={},n=!0,f=new b(function(){c(d,n);a.complete()});
void 0!==a.libData?a.url=a.libData.requestPath:void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);a.isGlobal=!1;this.loadModuleAsString(a.url,function(b,c){l.eachObj(c.modules,function(b,c,p){f.add(b,function(p){e.makeModuleFunction(e.transpile(c))(new r,{});e.loadModule(a,p,b,function(a){l.assign(d,a.self);n=!0===n&&!1===a.cache?!1:n;p()});e.loadComplete(b)})});f.start()})};h.prototype.loadModuleView=function(a,b){void 0!==a.libData?a.url=a.libData.requestPath:void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);
var e=new q(l.getNameFromPath(a.url),this._cache_);this.loadModuleAsString(a.url,function(c,d){e.initRender(this.makeRender().bind(this,e,c,d),this.makeRenderModuleFunction(this.transpile(d.renderScript.constructor)));b(e);a.complete()}.bind(this))};h.prototype.load=function(a,b){var e=a.libData,c=document.getElementsByTagName("head")[0],d=this.createNode(a);void 0!==e?(a.url=e.path,a.moduleName=e.self,a.isGlobal=e.isGlobal,a.isLib=!0):void 0!==a.aliasData?a.url=a.aliasData.path:(a.isGlobal=!1,a.isLib=
!1);d.src=a.url;d.setAttribute(f.MODULE_NAME,a.moduleName);var n=function(e){this.onLoadScript(e,a,d,n,b)}.bind(this);d.addEventListener("load",n,!1);c.appendChild(d)};h.prototype.onLoadScript=function(a,b,c,d,l){"load"===a.type&&(c.removeEventListener(c,d,a.type),this.loadModule(b,b.complete,c.getAttribute(f.MODULE_NAME),l),this.loadComplete(b.moduleName))};h.prototype.loadModule=function(a,b,c,d){var e=this._isDefine_?this._defineQueue_.peek():void 0;e&&!a.isGlobal?this.loadDefineModule(a,d,b,c,
e):this.loadGlobalModule(a,d,b)};h.prototype.loadDefineModule=function(a,b,c,d,f){var e=this;f(function(n){a.moduleData=n;n=e.getModule(a,d);b(n);c()})};h.prototype.loadGlobalModule=function(a,b,c){var e=a.moduleName,d=e;a.isLib||(d+=": There is no define function declared. ");a=this.getGlobalModule(e);void 0!==a?b({data:a,cache:!0}):d+=" \u203bfail loading module.";c();d!==e&&l.warn(d)};h.prototype.loadComplete=function(a){this._isDefine_=!1;this.removeScriptNode(a)};h.prototype.getModule=function(a,
b){var c=a.moduleData,e={};e.name=b;e.self={};e.data=c.define.apply(c.paramModules||[],c.paramModules);e.self[b]=e.data;e.cache=c.cache;return e};h.prototype.removeScriptNode=function(a){var b=document.getElementsByTagName("script");l.each(b,function(b,c){if(c.hasAttribute(f.MODULE_NAME)&&a===c.getAttribute(f.MODULE_NAME))return c.parentNode.removeChild(c),!1})};h.prototype.getGlobalModule=function(a){var b=window||c,e=b[a]||void 0;void 0!==e&&delete b[a];return e};h.prototype.createNode=function(a){a=
document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.async=!0;return a};h.prototype.loadModuleAsString=function(a,b){m.getAsync(a,function(a){a=l.removeAnnotation(a);var c=this.getScriptFromString(a);b(a,c)}.bind(this))};h.prototype.makeModuleFunction=function(a){return this.makeFunction([f.MODULE,f.EXPORTS],a)};h.prototype.makeRenderModuleFunction=function(a){return this.makeFunction([f.MESSAGE,f.RENDER_CONSTRUCTOR],a)};h.prototype.makeFunction=function(a,b){try{return Function(a,
b)}catch(p){l.error("syntax error: "+b)}};h.prototype.makeRender=function(){return function(a,b,c,d){var e=this,n=document.getElementById(d.targetId);c=c.scripts;e._cache_.hasChild(d.originRenderElementName,d.targetId)||e._cache_.setChild(d.originRenderElementName,d.targetId,n.innerHTML);n.innerHTML=b;d.setModuleScope({self:n.querySelector("["+f.MODULE_ELEMENT+"]")});if(!d.isRunScript)return!1;l.eachObj(c,function(b,c,f){e._cache_.hasChild(d.moduleName,b)?c=e._cache_.get(d.moduleName,b):(c=e.makeRenderModuleFunction(e.transpile(c)),
e._cache_.setChild(d.moduleName,b,c));c(a.message.self(),function(){})})}};h.prototype.getScriptFromString=function(a){var b={},c={},d={},e={};if(void 0!==a&&"string"===typeof a)for(;-1!=a.indexOf("<script");){var h=a.indexOf("<script");var g=a.indexOf("\x3c/script");h=a.substring(h,g)+"\x3c/script>";a=a.substring(g+9,a.length);try{var k=l.DOMParser.parseFromString(h,"application/xml").getElementsByTagName("script")}catch(u){l.error("syntax error:"+h)}if(0===k.length)break;h=h.substring(h.indexOf(">")+
1,h.indexOf("\x3c/script>"));k=k[0];this.isRenderConstructor(k)&&(k.setAttribute(f.MODULE_IGNORE,"true"),b.constructor=h);this.isIgnoreScript(k)||(g=k.getAttribute(f.MODULE_NAME),void 0!=g&&""!==l.trim(g)||l.error('"'+f.MODULE_NAME+'" property is required: \n'+h),d[g]=k,c[g]=h,e[g]=h)}return{modules:c,nodes:d,scripts:e,renderScript:b}};h.prototype.isRenderConstructor=function(a){return a.hasAttribute(f.MODULE_RENDER)&&"constructor"===a.getAttribute(f.MODULE_RENDER)};h.prototype.isIgnoreScript=function(a){return a.hasAttribute(f.MODULE_IGNORE)&&
"true"===a.getAttribute(f.MODULE_IGNORE)};h.prototype.imports=function(a,c,d){var e=c._self_.defaultDeps,h=new b,n=[],g={},k,q,p=this;l.eachObj(a,function(a,b,d){Array.isArray(d[a])&&(g[a]={},g[a][f.DEFAULT_DEPS]={},n.push(g[a]),k=e[a],q=k.concat(b).filter(function(a,b,c){return c.indexOf(a)===b}),l.each(q,function(b,d){p.importModule({type:a,path:d,config:c,importPromise:h,isDefault:-1<k.indexOf(d)?!0:!1,libData:c.getLibData(d),aliasData:c.getAliasData(d),moduleName:l.getNameFromPath(d),importModules:g})}))});
h.setComplete(function(){d(n,function(){p._cache_.clear()})});h.start()};h.prototype.importModule=function(a){a.setModuleDataFun=function(b,c){!0===a.isDefault?a.importModules[b][f.DEFAULT_DEPS][a.moduleName]=c:a.importModules[b][a.moduleName]=c};a.type===f.REQUIRE_JS?this.importModuleJs(a):a.type===f.REQUIRE_PAGE?this.importModuleNode(a):a.type===f.REQUIRE_VIEW&&this.importModuleView(a)};h.prototype.importModuleJs=function(a){var b=this,c=a.moduleName;a.importPromise.add(c,function(d){if(b._cache_.has(c))return a.setModuleDataFun(f.REQUIRE_JS,
b._cache_.get(c)),d(),!1;a.url=a.config.getResourceUrl(a.path);a.complete=d;b.loadModuleJs(a,function(d,e){a.setModuleDataFun(f.REQUIRE_JS,d);!0===e&&b._cache_.set(c,d)})})};h.prototype.importModuleNode=function(a){var b=this,c=a.moduleName;a.importPromise.add(c,function(d){if(b._cache_.has(c))return a.setModuleDataFun(f.REQUIRE_JS,b._cache_.get(c)),d(),!1;a.url=a.config.getRequestUrl(a.path);a.complete=d;b.loadModuleNode(a,function(d,e){a.setModuleDataFun(f.REQUIRE_PAGE,d);!0===e&&b._cache_.set(c,
d)})})};h.prototype.importModuleView=function(a){var b=a.moduleName+f.CACHE_VIEW_SUFFIX,c=this;a.importPromise.add(a.moduleName,function(d){if(c._cache_.has(b))return a.setModuleDataFun(f.REQUIRE_JS,c._cache_.get(b)),d(),!1;a.url=a.config.getRequestUrl(a.path);a.complete=d;c.loadModuleView(a,function(d){a.setModuleDataFun(f.REQUIRE_VIEW,d.exports);c._cache_.set(b,d.exports)})})};g.exports=new h}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{"../util/ajax":9,"../util/cache":10,"../util/promise":12,"../util/queue":13,"../util/util":14,"../util/word":15,"./module":7,"./module-view":6}],5:[function(a,g,m){a=function(a){this._storage_={};this._self_={};this._self_.on=function(b,c){this._storage_.hasOwnProperty(a)||(this._storage_[a]={});this._storage_[a][b]=c;return this._self_}.bind(this)};a.prototype.self=function(){return this._self_};a.prototype.postMessage=function(a,b,d,g){void 0!==this._storage_[a][b]&&this._storage_[a][b].call(g,
d);return this._self_};g.exports=a},{}],6:[function(a,g,m){function c(a,b){var c=!0;f.each(b.targetIds,function(d,e){a({targetId:e,isRunScript:c,startPostQueue:b.startPostQueue,setModuleScope:b.setModuleScope,moduleName:b.moduleName+k.CACHE_VIEW_RENDER_FUN_SUFFIX,originRenderElementName:b.moduleName+k.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX});c=!1;b.addRenderIds(e)})}var b=a("../util/promise"),d=a("../util/queue"),k=a("../util/word"),f=a("../util/Util"),t=a("./module");a=function(a,b){this._create_=
function(){var c=new t(a);this.extendToModuleForView(c,b);return c};return this._create_()};a.prototype.extendToModuleForView=function(a,c){a.renderIds=[];a.moduleScope={};a.isCompleteConstructor=!1;a.postQueue=new d;a.viewCache=c;a.initRender=function(a,c){this.exports.render=this.exports.render.bind(this,a);var d=new b(function(a){this.moduleScope.state=a[k.RENDER_CONSTRUCTOR];this.startPostQueue();this.isCompleteConstructor=!0}.bind(this));void 0!==c&&d.add(k.RENDER_CONSTRUCTOR,function(a){c(void 0,
function(b){b(a)})});this.postQueue.stop();d.start()};a.startPostQueue=function(){a.postQueue.run()};this.extendToExportsForView.call(a,a.exports);f.defineProperty(a,"message")};a.prototype.extendToExportsForView=function(a){var b=this;a.render=function(a,d){if(void 0===d||"string"!==typeof d)return f.warn("render() parameter: not exists area id for render!"),b.exports;var e={moduleName:b.id,targetIds:d.split(","),startPostQueue:b.startPostQueue,setModuleScope:function(a){b.moduleScope.$self.push(a.self)},
addRenderIds:function(a){-1===b.renderIds.indexOf(a)&&b.renderIds.push(a)}};!0===b.isCompleteConstructor?(b.moduleScope.$self=[],c(a,e)):b.postQueue.offer(function(){b.moduleScope.$self=[];c(a,e)});return b.exports};a.postMessage=function(a,c){b.postQueue.offer(function(){b.message.postMessage(b.id,a,c,b.moduleScope)});b.isCompleteConstructor&&b.startPostQueue();return b.exports};a.destroy=function(a){var c=b.id+k.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX,d=b.renderIds,g=void 0==a?void 0:a.split(",");
this.postMessage("destroy");f.eachRvs(d,function(f,e){if(void 0===a||-1!=g.indexOf(e)){var k=document.getElementById(e);if(b.viewCache.hasChild(c,e))k.innerHTML=b.viewCache.get(c,e);else for(;k.firstChild;)k.removeChild(k.firstChild);d.splice(f,1)}});return b.exports}};g.exports=a},{"../util/Util":8,"../util/promise":12,"../util/queue":13,"../util/word":15,"./module":7}],7:[function(a,g,m){var c=a("./message"),b=a("../util/Util");a=function(a){this._create_=function(){var d=this.createModule();d.message=
new c(a);d.cache=!0;d.id=a;b.defineProperty(d,"exports");b.defineProperty(d,"cache",{configurable:!1,enumerable:!1,writable:!0});return d};return this._create_()};a.prototype.createModule=function(){var a={};a.exports=this.createExports();return a};a.prototype.createExports=function(){return{}};g.exports=a},{"../util/Util":8,"./message":5}],8:[function(a,g,m){a("./word");a={DOMParser:new DOMParser,assign:function(a,b){for(var c in b)a[c]=b[c]},each:function(a,b){if(a){var c;for(c=0;c<a.length;c++)if(a[c]&&
!1===b(c,a[c]))return!1}return!0},eachRvs:function(a,b){if(a){var c;for(c=a.length-1;0<=c;c--)if(a[c]&&!1===b(c,a[c]))return!1}return!0},eachObj:function(a,b){if(a)for(var c in a)if(!1===!b(c,a[c],a))return!1;return!0},defineProperty:function(a,b,d){d=d||{configurable:!1,enumerable:!1};Object.defineProperty(a,b,d)},getNameFromPath:function(a){a=String(a);var b="./"===a.split("./")[0]?2:"/"===a[0]?1:0;0!=b&&(a=a.substring(b,a.length));b=a.lastIndexOf("/");-1!=b&&(a=a.substring(b+1,a.length));b=a.lastIndexOf(".");
-1!=b&&(a=a.substring(0,b));return a},trim:function(a){return a.replace(/\s\S/g,"")},isEs6Browser:function(){try{eval("function foo(bar, ...rest) { return 1; };")}catch(c){return!1}return!0}(),removeAnnotation:function(a){return a.replace(/(\/\*(\s|\S)*?\*\/)|<!-{2,}(\s|\S)*?-{2,}>|^\/\/.*/g,"")},warn:function(a){console.warn("modular >> "+a)},error:function(a){console.error("modular >> "+a)}};g.exports=a},{"./word":15}],9:[function(a,g,m){var c=a("./util");a=function(){this._async_=!1};a.prototype.async=
function(a){this._async_=void 0===a?!1:a;return this};a.prototype.createXMLHttpRequest=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")};a.prototype.$=function(a,d){var b=this.createXMLHttpRequest();b.open("GET",a,this._async_);var f={};b.onload=function(b){var g=b.target.status;200!==g&&c.error("module:["+a+"] status:["+g+"].");d(f,b)};b.send();return f.data};a.prototype.getSync=function(a,c){this.async(!1);return this.$(a,function(a,b){a.data=c(b.target.response||
b.target.responseText)})};a.prototype.getAsync=function(a,c){this.async(!0);this.$(a,function(a,b){c(b.target.response||b.target.responseText)})};g.exports=new a},{"./util":14}],10:[function(a,g,m){a=function(){this._self_={}};a.prototype.get=function(){var a=this._self_;if(0==arguments.length)return a;for(var b=0,d;d=arguments[b];b++)null!=a[d]&&(a=a[d]);return a};a.prototype.set=function(a,b){this._self_[a]=b};a.prototype.setChild=function(a,b,d){this.has(a)||this.set(a,{});this._self_[a][b]=d};
a.prototype.has=function(a){return this._self_.hasOwnProperty(a)};a.prototype.hasChild=function(a,b){return this._self_.hasOwnProperty(a)&&this._self_[a].hasOwnProperty(b)};a.prototype.clear=function(){this._self_={}};g.exports=a},{}],11:[function(a,g,m){g.exports=function(){}},{}],12:[function(a,g,m){var c=a("../util/util");a=function(a){this._array_=[];this._completeFun_=a;this._state_={}};a.prototype.add=function(a,c){this._array_.push({name:a,fun:c,isLoad:!1})};a.prototype.start=function(){var a=
this;0===a._array_.length&&this.runComplete();c.each(a._array_,function(b,c){c.fun(a.complete.bind(a,c))})};a.prototype.complete=function(a,c){a.isLoad=!0;this._state_[a.name]=c;this.isComplete()&&this.runComplete()};a.prototype.isComplete=function(){return 0===this._array_.length?!0:c.each(this._array_,function(a,c){if(!1===c.isLoad)return!1})};a.prototype.setComplete=function(a){this._completeFun_=void 0===a?function(){}:a};a.prototype.runComplete=function(){if(void 0===this._completeFun_)return!1;
this._completeFun_(this._state_);this._completeFun_=void 0;this._array_=[]};g.exports=a},{"../util/util":14}],13:[function(a,g,m){a=function(){this._stop_=!1;this._self_=[]};a.prototype.offer=function(a){this._self_.push(a);!1===this._stop_&&this.peek()()};a.prototype.peek=function(){return this._self_.shift()};a.prototype.length=function(){return this._self_.length};a.prototype.isEmpty=function(){return 0===this._self_.length};a.prototype.stop=function(){this._stop_=!0};a.prototype.run=function(){for(;!this.isEmpty();)this.peek()();
this._stop_=!1};g.exports=a},{}],14:[function(a,g,m){arguments[4][8][0].apply(m,arguments)},{"./word":15,dup:8}],15:[function(a,g,m){g.exports={REQUIRE_PAGE:"request",REQUIRE_JS:"require",REQUIRE_VIEW:"requestView",REQUIRE_IMPORT:"imports",DEFAULT_DEPS:"$default",MODULE:"module",EXPORTS:"exports",MESSAGE:"message",DEFINE:"define",MODULAR_CONFIGURE:"modular",MODULE_NAME:"modular-name",MODULE_IGNORE:"modular-ignore",MODULE_ELEMENT:"modular-module",MODULE_RENDER:"modular-render",RENDER_CONSTRUCTOR:"renderConstructor",
ES6_TYPE:"text/babel",ES6_PRESET:"es2015",CACHE_SYNC_PREFIX:"cache-sync-",CACHE_VIEW_SUFFIX:"-view",CACHE_VIEW_RENDER_FUN_SUFFIX:"-view-render-fun",CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX:"-view-render-origin-element"}},{}]},{},[1]);