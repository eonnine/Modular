(function(){function a(h,m,d){function b(e,n){if(!m[e]){if(!h[e]){var k="function"==typeof require&&require;if(!n&&k)return k(e,!0);if(c)return c(e,!0);k=Error("Cannot find module '"+e+"'");throw k.code="MODULE_NOT_FOUND",k;}k=m[e]={exports:{}};h[e][0].call(k.exports,function(a){return b(h[e][1][a]||a)},k,k.exports,a,h,m,d)}return m[e].exports}for(var c="function"==typeof require&&require,n=0;n<d.length;n++)b(d[n]);return b}return a})()({1:[function(a,h,m){a("./main")},{"./main":2}],2:[function(a,
h,m){(function(a){for(var b in a)this[b]=a[b]})(function(){a("./util/promise");var d=a("./util/polyfill"),b=a("./util/queue"),c=a("./util/word");a("./util/ajax");a("./util/util");var n=a("./module/loader"),e=a("./module/config");d();var h=new e,k=new b;d={};n.init(h);d[c.REQUIRE_IMPORT]=function(b,a){k.offer(function(){setTimeout(function(){n.imports(b,h,function(b,f){a.apply(b,b);f()})},20)})};d[c.MODULAR_CONFIGURE]={config:function(b){h.set(b)}};return d}())},{"./module/config":3,"./module/loader":4,
"./util/ajax":9,"./util/polyfill":11,"./util/promise":12,"./util/queue":13,"./util/util":14,"./util/word":15}],3:[function(a,h,m){a("../util/word");var d=a("../util/util");a("./module");a=function(b){this._self_={es6:!1,resource:{path:"",excludePattern:"",isRemovePatten:!0},request:{path:"",excludePattern:"",isRemovePatten:!0},lib:{},alias:{},shim:{},defaultDeps:{require:[],request:[],requestView:[]}}};a.prototype.set=function(b){var a=function(b,c){d.eachObj(c,function(d,e){"object"===typeof c[d]&&
0<Object.keys(c[d]).length&&a(b[d],c[d]);void 0!=c[d]&&"object"!=typeof c[d]&&void 0!==b&&(b[d]=c[d])})};a(this._self_,b);var n=this._self_.lib;d.eachObj(b.lib,function(b,a){n[b]=a});var e=this._self_.alias;d.eachObj(b.alias,function(b,a){e[b]=a});var h=this._self_.shim;d.eachObj(b.shim,function(b,a){h[b]=a});this.setConfigValidator(this._self_)};a.prototype.setConfigValidator=function(b){b.resource.isRemovePatten=!0!==b.resource.isRemovePatten?!1:!0;b.request.isRemovePatten=!0!==b.request.isRemovePatten?
!1:!0;b.resource.excludePattern=void 0==b.resource.excludePattern?void 0:b.resource.excludePattern;b.request.excludePattern=void 0==b.request.excludePattern?void 0:b.request.excludePattern};a.prototype.getResourceUrl=function(b){return this.makePath(b,this._self_.resource)};a.prototype.getRequestUrl=function(b){return this.makePath(b,this._self_.request)};a.prototype.getLibData=function(b){var a=this._self_.lib[b];if(void 0!==a)return{self:a.self||b,propPath:a.path||b,requestPath:this.concat(this._self_.lib[b].path,
this._self_.request.path),path:this.concat(this._self_.lib[b].path,this._self_.resource.path),isGlobal:a.self?!0:!1}};a.prototype.getAliasData=function(b){var a=this._self_.alias[b];if(void 0!==a)return{propPath:a.path||b,requestPath:this.concat(this._self_.alias[b].path,this._self_.request.path),path:this.concat(this._self_.alias[b].path,this._self_.resource.path)}};a.prototype.makePath=function(b,a){void 0!==b&&""!==b.replace(/\s/gi)||d.error("There is empty path");var c=this._self_.lib;if(c.hasOwnProperty(b)&&
c[b].hasOwnProperty("path"))return this.concat(c[b].path,a.path);c=this.isExcludePattern(b,a.excludePattern);b=a.isRemovePatten?b.replace(a.excludePattern,""):b;return c?b:this.concat(b,a.path)};a.prototype.concat=function(b,a){return(void 0!=a&&"string"===typeof a?a+b:b).replace(/\/\//g,"/")};a.prototype.isExcludePattern=function(b,a){var d=!1;if("/"===a)return d=!0;void 0!==a&&""!==a.replace(/\s\S/g,"")&&(a.split(",").map(function(a){return a.replace(/\s/gi,"")}),-1!==b.indexOf(a)&&(d=!0));return d};
h.exports=a},{"../util/util":14,"../util/word":15,"./module":7}],4:[function(a,h,m){(function(d){var b=a("../util/promise"),c=a("../util/queue"),n=a("../util/cache"),e=a("../util/word"),m=a("../util/ajax"),k=a("../util/util"),t=a("./module-view"),p=a("./module"),g=function(){this._isDefine_=!1;this._defineQueue_=new c;this._cache_=new n};g.prototype.init=function(f){this._defineQueue_.stop();var a=function(a,b,d){var q=this;void 0===d&&(d=b,b=a,a=void 0);void 0===d&&(d=b,b=void 0);var c=void 0,l=
!0;"string"===typeof a?c=a:"object"===typeof a&&(c=null!=a.name&&""!==a.name.replace(/\s/g,"")?a.name:c,l=!1===a.cache?!1:l);c=void 0;q._isDefine_=!0;q._defineQueue_.offer(function(a){q.imports(b,f,function(f,b){a({define:d,paramModules:f,cache:l})})})}.bind(this);a.amd={modular:!0};window[e.DEFINE]=a};g.prototype.transpile=function(a){return a};g.prototype.loadModuleJs=function(a,b){this.load(a,function(a){b(a.data,a.cache)})};g.prototype.loadModuleNode=function(a,d){var f=this;new p;var c={},l=
!0,e=new b(function(){d(c,l);a.complete()});void 0!==a.libData?a.url=a.libData.requestPath:void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);a.isGlobal=!1;this.loadModuleAsString(a.url,function(b,d){k.eachObj(d.scripts,function(b,d,q){e.add(b,function(q){f.makeModuleFunction(f.transpile(d))(new p,{});f.loadModule(a,q,b,function(a){k.assign(c,a.self);l=!0===l&&!1===a.cache?!1:l;q()});f.loadComplete(b)})});e.start()})};g.prototype.loadModuleView=function(a,b){void 0!==a.libData?a.url=a.libData.requestPath:
void 0!==a.aliasData&&(a.url=a.aliasData.requestPath);var f=new t(k.getNameFromPath(a.url),this._cache_);this.loadModuleAsString(a.url,function(d,c){f.initRender(this.makeRender().bind(this,f,d,c),this.makeRenderModuleFunction(this.transpile(c.renderScript.constructor)));b(f);a.complete()}.bind(this))};g.prototype.load=function(a,b){var f=a.libData,d=document.getElementsByTagName("head")[0],c=this.createNode(a);void 0!==f?(a.url=f.path,a.moduleName=f.self,a.isGlobal=f.isGlobal,a.isLib=!0):void 0!==
a.aliasData?a.url=a.aliasData.path:(a.isGlobal=!1,a.isLib=!1);c.src=a.url;c.setAttribute(e.MODULE_NAME,a.moduleName);var l=function(f){this.onLoadScript(f,a,c,l,b)}.bind(this);c.addEventListener("load",l,!1);d.appendChild(c)};g.prototype.onLoadScript=function(a,b,d,c,g){"load"===a.type&&(d.removeEventListener(d,c,a.type),this.loadModule(b,b.complete,d.getAttribute(e.MODULE_NAME),g),this.loadComplete(b.moduleName))};g.prototype.loadModule=function(a,b,d,c){var f=this._isDefine_?this._defineQueue_.peek():
void 0;f&&!a.isGlobal?this.loadDefineModule(a,c,b,d,f):this.loadGlobalModule(a,c,b)};g.prototype.loadDefineModule=function(a,b,d,c,e){var f=this;e(function(l){a.moduleData=l;l=f.getModule(a,c);b(l);d()})};g.prototype.loadGlobalModule=function(a,b,d){var f=a.moduleName,c=f;a.isLib||(c+=": There is no define function declared. ");a=this.getGlobalModule(f);void 0!==a?b({data:a,cache:!0}):c+=" \u203bfail loading module.";d();c!==f&&k.warn(c)};g.prototype.loadComplete=function(a){this._isDefine_=!1;this.removeScriptNode(a)};
g.prototype.getModule=function(a,b){var d=a.moduleData,f={};f.name=b;f.self={};f.data=d.define.apply(d.paramModules||[],d.paramModules);f.self[b]=f.data;f.cache=d.cache;return f};g.prototype.removeScriptNode=function(a){var b=document.getElementsByTagName("script");k.each(b,function(b,d){if(d.hasAttribute(e.MODULE_NAME)&&a===d.getAttribute(e.MODULE_NAME))return d.parentNode.removeChild(d),!1})};g.prototype.getGlobalModule=function(a){var b=window||d,f=b[a]||void 0;void 0!==f&&delete b[a];return f};
g.prototype.createNode=function(a){a=document.createElement("script");a.type="text/javascript";a.charset="utf-8";a.async=!0;return a};g.prototype.loadModuleAsString=function(a,b){m.getAsync(a,function(a){a=k.removeAnnotation(a);var d=this.parseStringToScript(a);b(a,d)}.bind(this))};g.prototype.makeModuleFunction=function(a){return this.makeFunction([e.MODULE,e.EXPORTS],a)};g.prototype.makeRenderModuleFunction=function(a){return this.makeFunction([e.MESSAGE,e.RENDER_CONSTRUCTOR],a)};g.prototype.makeFunction=
function(a,b){try{return Function(a,b)}catch(q){k.error("syntax error: "+b)}};g.prototype.makeRender=function(){return function(a,b,d,c){var f=this,l=document.getElementById(c.targetId);d=d.scripts;f._cache_.hasChild(c.originRenderElementName,c.targetId)||f._cache_.setChild(c.originRenderElementName,c.targetId,l.innerHTML);l.innerHTML=b;c.setModuleScope({self:l.querySelector("["+e.MODULE_ELEMENT+"]")});if(!c.isRunScript)return!1;k.eachObj(d,function(b,d,e){f._cache_.hasChild(c.moduleName,b)?d=f._cache_.get(c.moduleName,
b):(d=f.makeRenderModuleFunction(f.transpile(d)),f._cache_.setChild(c.moduleName,b,d));d(a.message.self(),function(){})})}};g.prototype.parseStringToScript=function(a){var b={},d={},f={},c,g,p=this;void 0!==a&&"string"===typeof a&&(a=a.match(k.regExp.scriptAreas),k.each(a,function(a,l){try{g=k.DOMParser.parseFromString(l,"application/xml").getElementsByTagName("script")}catch(u){k.error("syntax error:"+l)}void 0!==g&&0!==g.length&&(l=l.replace(k.regExp.scriptTags,""),g=g[0],p.isRenderConstructor(g)&&
(g.setAttribute(e.MODULE_IGNORE,"true"),f.constructor=l),p.isIgnoreScript(g)||(c=g.getAttribute(e.MODULE_NAME),void 0!=c&&""!==k.trim(c)||k.error('"'+e.MODULE_NAME+'" property is required: \n'+l),b[c]=g,d[c]=l))}));return{nodes:b,scripts:d,renderScript:f}};g.prototype.isRenderConstructor=function(a){return a.hasAttribute(e.MODULE_RENDER)&&"constructor"===a.getAttribute(e.MODULE_RENDER)};g.prototype.isIgnoreScript=function(a){return a.hasAttribute(e.MODULE_IGNORE)&&"true"===a.getAttribute(e.MODULE_IGNORE)};
g.prototype.imports=function(a,d,c){var f=d._self_.defaultDeps,g=new b,l=[],p={},n,h,q=this;k.eachObj(a,function(a,b,c){Array.isArray(c[a])&&(p[a]={},p[a][e.DEFAULT_DEPS]={},l.push(p[a]),n=f[a],h=n.concat(b).filter(function(a,b,d){return d.indexOf(a)===b}),k.each(h,function(b,c){q.importModule({type:a,path:c,config:d,importPromise:g,isDefault:-1<n.indexOf(c)?!0:!1,libData:d.getLibData(c),aliasData:d.getAliasData(c),moduleName:k.getNameFromPath(c),importModules:p})}))});g.setComplete(function(){c(l,
function(){q._cache_.clear()})});g.start()};g.prototype.importModule=function(a){a.setModuleDataFun=function(b,d){!0===a.isDefault?a.importModules[b][e.DEFAULT_DEPS][a.moduleName]=d:a.importModules[b][a.moduleName]=d};a.type===e.REQUIRE_JS?this.importModuleJs(a):a.type===e.REQUIRE_PAGE?this.importModuleNode(a):a.type===e.REQUIRE_VIEW&&this.importModuleView(a)};g.prototype.importModuleJs=function(a){var b=this,d=a.moduleName;a.importPromise.add(d,function(c){if(b._cache_.has(d))return a.setModuleDataFun(e.REQUIRE_JS,
b._cache_.get(d)),c(),!1;a.url=a.config.getResourceUrl(a.path);a.complete=c;b.loadModuleJs(a,function(c,f){a.setModuleDataFun(e.REQUIRE_JS,c);!0===f&&b._cache_.set(d,c)})})};g.prototype.importModuleNode=function(a){var b=this,d=a.moduleName;a.importPromise.add(d,function(c){if(b._cache_.has(d))return a.setModuleDataFun(e.REQUIRE_JS,b._cache_.get(d)),c(),!1;a.url=a.config.getRequestUrl(a.path);a.complete=c;b.loadModuleNode(a,function(c,f){a.setModuleDataFun(e.REQUIRE_PAGE,c);!0===f&&b._cache_.set(d,
c)})})};g.prototype.importModuleView=function(a){var b=a.moduleName+e.CACHE_VIEW_SUFFIX,d=this;a.importPromise.add(a.moduleName,function(c){if(d._cache_.has(b))return a.setModuleDataFun(e.REQUIRE_JS,d._cache_.get(b)),c(),!1;a.url=a.config.getRequestUrl(a.path);a.complete=c;d.loadModuleView(a,function(c){a.setModuleDataFun(e.REQUIRE_VIEW,c.exports);d._cache_.set(b,c.exports)})})};h.exports=new g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{"../util/ajax":9,"../util/cache":10,"../util/promise":12,"../util/queue":13,"../util/util":14,"../util/word":15,"./module":7,"./module-view":6}],5:[function(a,h,m){a=function(a){this._storage_={};this._self_={};this._self_.on=function(b,d){this._storage_.hasOwnProperty(a)||(this._storage_[a]={});this._storage_[a][b]=d;return this._self_}.bind(this)};a.prototype.self=function(){return this._self_};a.prototype.postMessage=function(a,b,c,n){void 0!==this._storage_[a][b]&&this._storage_[a][b].call(n,
c);return this._self_};h.exports=a},{}],6:[function(a,h,m){function d(a,b){var d=!0;r.each(b.targetIds,function(c,g){a({targetId:g,isRunScript:d,startPostQueue:b.startPostQueue,setModuleScope:b.setModuleScope,moduleName:b.moduleName+e.CACHE_VIEW_RENDER_FUN_SUFFIX,originRenderElementName:b.moduleName+e.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX});d=!1;b.addRenderIds(g)})}function b(a,b,d,c){var f=b+e.CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX,g=void 0==a?void 0:a.split(",");r.eachRvs(d,function(b,e){if(void 0===
a||-1!=g.indexOf(e)){var p=document.getElementById(e);if(c.hasChild(f,e))p.innerHTML=c.get(f,e);else for(;p.firstChild;)p.removeChild(p.firstChild);d.splice(b,1)}})}var c=a("../util/promise"),n=a("../util/queue"),e=a("../util/word"),r=a("../util/Util"),k=a("./module");a=function(a,b){this._create_=function(){var d=new k(a);this.extendToModuleForView(d,b);return d};return this._create_()};a.prototype.extendToModuleForView=function(a,b){a.renderIds=[];a.moduleScope={};a.isCompleteConstructor=!1;a.postQueue=
new n;a.viewCache=b;a.initRender=function(a,b){this.exports.render=this.exports.render.bind(this,a);var d=new c(function(a){this.moduleScope.state=a[e.RENDER_CONSTRUCTOR];this.startPostQueue();this.isCompleteConstructor=!0}.bind(this));void 0!==b&&d.add(e.RENDER_CONSTRUCTOR,function(a){b(void 0,function(b){b(a)})});this.postQueue.stop();d.start()};a.startPostQueue=function(){a.postQueue.run()};this.extendToExportsForView.call(a,a.exports);r.defineProperty(a,"message")};a.prototype.extendToExportsForView=
function(a){var c=this;a.render=function(a,b){if(void 0===b||"string"!==typeof b)return r.warn("render() parameter: not exists area id for render!"),c.exports;var e={moduleName:c.id,targetIds:b.split(","),startPostQueue:c.startPostQueue,setModuleScope:function(a){c.moduleScope.$self.push(a.self)},addRenderIds:function(a){-1===c.renderIds.indexOf(a)&&c.renderIds.push(a)}};!0===c.isCompleteConstructor&&0===c.postQueue.length()?(c.moduleScope.$self=[],d(a,e)):c.postQueue.offer(function(){c.moduleScope.$self=
[];d(a,e)});return c.exports};a.postMessage=function(a,b){c.postQueue.offer(function(){c.message.postMessage(c.id,a,b,c.moduleScope)});c.isCompleteConstructor&&c.startPostQueue();return c.exports};a.destroy=function(a){!0===c.isCompleteConstructor&&0===c.postQueue.length()?(c.exports.postMessage("destroy"),b(a,c.id,c.renderIds,c.viewCache)):c.postQueue.offer(function(){c.exports.postMessage("destroy");b(a,c.id,c.renderIds,c.viewCache)});return c.exports}};h.exports=a},{"../util/Util":8,"../util/promise":12,
"../util/queue":13,"../util/word":15,"./module":7}],7:[function(a,h,m){var d=a("./message"),b=a("../util/Util");a=function(a){this._create_=function(){var c=this.createModule();c.message=new d(a);c.cache=!0;c.id=a;b.defineProperty(c,"exports");b.defineProperty(c,"cache",{configurable:!1,enumerable:!1,writable:!0});return c};return this._create_()};a.prototype.createModule=function(){var a={};a.exports=this.createExports();return a};a.prototype.createExports=function(){return{}};h.exports=a},{"../util/Util":8,
"./message":5}],8:[function(a,h,m){a("./word");a={DOMParser:new DOMParser,regExp:{scriptAreas:/<script(\s)(modular-name|modular-render)(\s|\S)*?(\s|\S)*?<\/script(\s|\S)*?>/g,scriptTags:/<script(\s|\S)*?>|<\/script(\s|\S)*?>/g,annotaion:/(\/\*(\s|\S)*?\*\/)|<!-{2,}(\s|\S)*?-{2,}>|^\/\/.*|(\/\/.*)/g},assign:function(a,b){for(var d in b)a[d]=b[d]},each:function(a,b){if(a){var d;var h=0;for(d=a.length;h<d;h++)if(a[h]&&!1===b(h,a[h]))return!1}return!0},eachRvs:function(a,b){if(a){var d;for(d=a.length-
1;0<=d;d--)if(a[d]&&!1===b(d,a[d]))return!1}return!0},eachObj:function(a,b){if(a)for(var d in a)if(!1===!b(d,a[d],a))return!1;return!0},defineProperty:function(a,b,c){c=c||{configurable:!1,enumerable:!1};Object.defineProperty(a,b,c)},getNameFromPath:function(a){a=String(a);var b="./"===a.split("./")[0]?2:"/"===a[0]?1:0;0!=b&&(a=a.substring(b,a.length));b=a.lastIndexOf("/");-1!=b&&(a=a.substring(b+1,a.length));b=a.lastIndexOf(".");-1!=b&&(a=a.substring(0,b));return a},trim:function(a){return a.replace(/\s\S/g,
"")},isEs6Browser:function(){try{eval("function foo(bar, ...rest) { return 1; };")}catch(d){return!1}return!0}(),removeAnnotation:function(a){return a.replace(this.regExp.annotaion,"")},warn:function(a){console.warn("modular >> "+a)},error:function(a){console.error("modular >> "+a)}};h.exports=a},{"./word":15}],9:[function(a,h,m){var d=a("./util");a=function(){this._async_=!1};a.prototype.async=function(a){this._async_=void 0===a?!1:a;return this};a.prototype.createXMLHttpRequest=function(){return window.XMLHttpRequest?
new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")};a.prototype.$=function(a,c){var b=this.createXMLHttpRequest();b.open("GET",a,this._async_);var e={};b.onload=function(b){var h=b.target.status;200!==h&&d.error("module:["+a+"] status:["+h+"].");c(e,b)};b.send();return e.data};a.prototype.getSync=function(a,d){this.async(!1);return this.$(a,function(a,b){a.data=d(b.target.response||b.target.responseText)})};a.prototype.getAsync=function(a,d){this.async(!0);this.$(a,function(a,b){d(b.target.response||
b.target.responseText)})};h.exports=new a},{"./util":14}],10:[function(a,h,m){a=function(){this._self_={}};a.prototype.get=function(){var a=this._self_;if(0==arguments.length)return a;for(var b=0,c;c=arguments[b];b++)null!=a[c]&&(a=a[c]);return a};a.prototype.set=function(a,b){this._self_[a]=b};a.prototype.setChild=function(a,b,c){this.has(a)||this.set(a,{});this._self_[a][b]=c};a.prototype.has=function(a){return this._self_.hasOwnProperty(a)};a.prototype.hasChild=function(a,b){return this._self_.hasOwnProperty(a)&&
this._self_[a].hasOwnProperty(b)};a.prototype.clear=function(){this._self_={}};h.exports=a},{}],11:[function(a,h,m){h.exports=function(){}},{}],12:[function(a,h,m){var d=a("../util/util");a=function(a){this._array_=[];this._completeFun_=a;this._state_={}};a.prototype.add=function(a,c){this._array_.push({name:a,fun:c,isLoad:!1})};a.prototype.start=function(){var a=this;0===a._array_.length&&this.runComplete();d.each(a._array_,function(b,d){d.fun(a.complete.bind(a,d))})};a.prototype.complete=function(a,
c){a.isLoad=!0;this._state_[a.name]=c;this.isComplete()&&this.runComplete()};a.prototype.isComplete=function(){return 0===this._array_.length?!0:d.each(this._array_,function(a,c){if(!1===c.isLoad)return!1})};a.prototype.setComplete=function(a){this._completeFun_=void 0===a?function(){}:a};a.prototype.runComplete=function(){if(void 0===this._completeFun_)return!1;this._completeFun_(this._state_);this._completeFun_=void 0;this._array_=[]};h.exports=a},{"../util/util":14}],13:[function(a,h,m){a=function(){this._stop_=
!1;this._self_=[]};a.prototype.offer=function(a){this._self_.push(a);!1===this._stop_&&this.peek()()};a.prototype.peek=function(){return this._self_.shift()};a.prototype.length=function(){return this._self_.length};a.prototype.isEmpty=function(){return 0===this._self_.length};a.prototype.stop=function(){this._stop_=!0};a.prototype.run=function(){for(;!this.isEmpty();)this.peek()();this._stop_=!1};h.exports=a},{}],14:[function(a,h,m){arguments[4][8][0].apply(m,arguments)},{"./word":15,dup:8}],15:[function(a,
h,m){h.exports={REQUIRE_PAGE:"request",REQUIRE_JS:"require",REQUIRE_VIEW:"requestView",REQUIRE_IMPORT:"imports",DEFAULT_DEPS:"$default",MODULE:"module",EXPORTS:"exports",MESSAGE:"message",DEFINE:"define",MODULAR_CONFIGURE:"modular",MODULE_NAME:"modular-name",MODULE_IGNORE:"modular-ignore",MODULE_ELEMENT:"modular-module",MODULE_RENDER:"modular-render",RENDER_CONSTRUCTOR:"renderConstructor",ES6_TYPE:"text/babel",ES6_PRESET:"es2015",CACHE_SYNC_PREFIX:"cache-sync-",CACHE_VIEW_SUFFIX:"-view",CACHE_VIEW_RENDER_FUN_SUFFIX:"-view-render-fun",
CACHE_VIEW_RENDER_ORIGIN_ELEMENT_SUFFIX:"-view-render-origin-element"}},{}]},{},[1]);